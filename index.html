<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Binance Triangular Arbitrage</title>
  </head>
  <body>
    <h1>Binance Triangular Arbitrage</h1>
    <form>
      <label for="apiKey">API Key:</label>
      <input type="text" id="apiKey" name="apiKey"><br><br>
      <label for="apiSecret">API Secret:</label>
      <input type="text" id="apiSecret" name="apiSecret"><br><br>
      <button type="button" onclick="startTrading()">Start Trading</button>
    </form>
    <table id="opportunities">
      <thead>
        <tr>
          <th>Currency Pair</th>
          <th>Exchange Rate</th>
          <th>Potential Profit</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <script>
      // Define the currency pairs to be monitored
const pairs = [
  { pair: "ETHBTC", inverse: false },
  { pair: "BTCUSDT", inverse: false },
  { pair: "ETHUSDT", inverse: false },
  { pair: "BNBBTC", inverse: false },
  { pair: "LTCBTC", inverse: false },
  { pair: "BNBUSDT", inverse: false },
  { pair: "LTCUSDT", inverse: false },
];

// Define the API endpoint to retrieve exchange rate data
const endpoint = "https://api.binance.com/api/v3/ticker/price?symbol=";

// Define the refresh interval in milliseconds
const refreshInterval = 5000;

// Define a function to calculate the potential profit for a triangular arbitrage opportunity
function calculateProfit(rate1, rate2, rate3, inverse) {
  let profit;
  if (inverse) {
    profit = 10000 / (rate1 * rate2 * rate3) - 10000;
  } else {
    profit = rate1 * rate2 * rate3 - 10000;
  }
  return profit.toFixed(2);
}

// Define a function to update the table with the latest exchange rate data
function updateTable() {
  pairs.forEach((pair1, index1) => {
    pairs.forEach((pair2, index2) => {
      pairs.forEach((pair3, index3) => {
        if (
          index1 !== index2 &&
          index1 !== index3 &&
          index2 !== index3 &&
          !pair1.inverse &&
          !pair2.inverse &&
          !pair3.inverse
        ) {
          // Build the currency pair combinations
          const pair12 = pair1.pair + pair2.pair;
          const pair23 = pair2.pair + pair3.pair;
          const pair31 = pair3.pair + pair1.pair;

          // Make API requests to retrieve the exchange rates for the currency pairs
          Promise.all([
            fetch(endpoint + pair12).then((response) => response.json()),
            fetch(endpoint + pair23).then((response) => response.json()),
            fetch(endpoint + pair31).then((response) => response.json()),
          ])
            .then((rates) => {
              // Extract the exchange rates from the API response data
              const rate1 = parseFloat(rates[0].price);
              const rate2 = parseFloat(rates[1].price);
              const rate3 = parseFloat(rates[2].price);

              // Calculate the potential profit for the triangular arbitrage opportunity
              const profit = calculateProfit(rate1, rate2, rate3, false);

              // Update the table row with the exchange rate and potential profit data
              const row = document.getElementById(
                `${pair1.pair}-${pair2.pair}-${pair3.pair}`
              );
              const rateCell = row.cells[1];
              const profitCell = row.cells[2];
              rateCell.textContent = `${rate1.toFixed(8)} - ${rate2.toFixed(
                2
              )} - ${rate3.toFixed(2)}`;
              if (profit > 0) {
                profitCell.textContent = `$${profit}`;
                row.classList.add("opportunity");
              } else {
                profitCell.textContent = "";
                row.classList.remove("opportunity");
              }
            })
            .catch((error) => {
              console.error(error);
            });
        }
      });
    });
  });
}

// Update the table with the latest exchange rate data at regular intervals
setInterval(updateTable, refreshInterval);
</script>
  </body>
</html>
